<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <title>Mafia Moderator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="msg-scr">
    <div id="next-role-hint"></div>
    <div id="msg-text"></div>
    <button class="btn b-g" onclick="closeMsg()">Понятно</button>
</div>

<div class="hdr">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 id="main-title">Mafia Moderator</h2>
        <div style="display:flex; gap:8px">
            <button class="reset-link" onclick="toggleLog()">Лог</button>
            <button class="reset-link" onclick="confirmReset()">Сброс</button>
        </div>
    </div>
</div>

<div id="s1" class="s a">
    <div class="welcome-card">
        <h3>Правила и порядок</h3>
        <ul>
            <li><b>Сбор:</b> Впишите имена всех участников.</li>
            <li><b>Подготовка:</b> Раздайте карты игрокам живьем.</li>
            <li><b>Знакомство:</b> Отметьте роли в приложении.</li>
            <li><b>День 1:</b> Игроки знакомятся и рассказывают легенды.</li>
        </ul>
    </div>
    <div id="l1"></div>
    <div class="f-b">
        <button class="btn b-b" onclick="addP()">+ Игрок</button>
        <button class="btn b-g" onclick="if(ps.length>=4){go(1.5)}else{alert('Минимум 4 игрока')}">Далее</button>
    </div>
</div>

<div id="s1_5" class="s">
    <div class="welcome-card">
        <h3>Шаг 2: Раздача карт</h3>
        <p>1. Пересчитайте игроков.<br>2. Раздайте игровые карты.<br>3. В следующем окне укажите, сколько спецролей участвует в игре.</p>
        <p style="color:#ff3b30; font-weight:bold">Никому не показывайте экран!</p>
    </div>
    <div class="f-b">
        <button class="btn b-o" onclick="go(1)">Назад</button>
        <button class="btn b-g" onclick="go(2)">Настроить роли</button>
    </div>
</div>

<div id="s2" class="s">
    <div id="lp"></div>
    <div class="stats-bar">
        Всего: <b id="totalC">0</b> | Мирных: <b id="citC">0</b>
    </div>
    <div class="f-b">
        <button class="btn b-o" onclick="go(1.5)">Назад</button>
        <button class="btn b-g" onclick="checkR()">К знакомству</button>
    </div>
</div>

<div id="s3" class="s">
    <div id="roleLimitInfo"></div>
    <div id="l3"></div>
    <div class="f-b">
        <button class="btn b-g" onclick="nextRS()">Подтвердить</button>
    </div>
</div>

<div id="s4" class="s">
    <div id="nightStatusPanel"></div>
    <div id="voteStat"></div>
    <div id="l4"></div>
    <div class="f-b" id="game-controls">
        <button id="skB" class="btn b-o" onclick="doAction(null)">Пропустить</button>
        <button id="cfB" class="btn b-g" onclick="doAction(selId)">Подтвердить</button>
    </div>
</div>

<div id="s5" class="s">
    <div id="finalResultsPanel"></div>
    <div style="padding:10px">
        <h4>Хронология событий</h4>
    </div>
    <div id="finalLogList"></div>
    <div class="f-b">
        <button class="btn b-b" onclick="location.reload()">Новая игра</button>
    </div>
</div>

<div id="log-overlay" class="overlay" onclick="if(event.target===this)toggleLog()">
    <div class="overlay-content">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
            <h3>История игры</h3>
            <button class="close-btn" onclick="toggleLog()">✕</button>
        </div>
        <div id="log-list"></div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
